# 스트림
자바 8부터 추가된 기능으로, 데이터의 흐름을 추상화해서 다루는 도구이다.
컬렉션 또는 배열 등의 요소들을 연산 파이프라인을 통해 연속적인 형태로 처리할 수 있게 해준다.
중간 연산과 최종 연산을 구분하며, 지연 연산을 통해 불필요한 연산 최소화 한다.
내부적으로 파이프라인 형태를 만들어 데이터를 단계별로 처리하고 결과를 효율적으로 반환한다.


## 파이프라인?
스트림이 여러 단계를 거쳐 변환되고 처리되는 모습이 물처럼 파이프(관)을 타고 이동하면서
정수 시설이나 필터를 거치는 과정과 유사하다.
각 파이프 구간마다(중간연산) 데이터를 가공하고, 마지막 종착지(종료 연산) 까지 흐른다는 개념이 비슷하기 떄문에 파이프라인이라는 용어를 사용한다.

## 스트림 특징
1. 데이터 소스를 변경하지 않음
   - 스트림에서 제공하는 연산들은 원본 컬렉션을 변경하지 않고 결과만 새로 생성한다.
2. 일회성(1회 소비)
   - 한번 사용된 스트름림은 다시 사용할 수 없으며 필요하다면 새로 스트림을 생성해야 한다.
3. 파이프라인 구성
   - 중간연산(filter, map) 들이 이어지다가, 최종연산(foreach, collect, reduce) 을 만나면 연산이 수행되고 종료된다.
4. 지연 연산
   - 중간 연산은 필요할때가지 실제로 동작하지 않고, 최종 연산이 실행될 때 한번에 처리된다.
5. 병렬 처리 용이
   - 스트림으로부터 병렬 스트림을 쉽게 만들수 있어, 멀티코어 환경에서 병렬 연산을 단순한 코드로 만들 수 있음


### java stream 파이프라인 
- 일괄처리가 아니라, 하나씩 모든 단계 진행 후 다음 데이터 진행
- 1 -> filter -> map -> foreach
- 2 -> filter -> map -> foreach


### 왜 자바스트림은 지연연산, 파이프라인을 사용할까?
- 지연연산을 사용하여 스트림 최종연산(foreach, collect) 실행 시만 중간연산(filter,map)을 실행한다.
- 따라서, 람다가 실행될려면 최종연산을 작성해야한다.
- 지연연산 : 최대한 연산을 미루는 것
- findget() 처럼 하나 찾으면 바로 끝냄 , 더 이상 연산이 수행되지않음
- 이점 : 불필요한 연산 생략 , 메모리 사용 효율, 파이프라인 최적화



# 스트림 사용

## 스트림 생성


# 스트림 최종연산
1. collect
2. toList
3. toArray
4. foreach
5. count
6. reduce
- 요소들을 하나의 값으로 누적한다.
- 초기값을 
7. min, max
- Integer.compare(x,y) 기준으로 작성해야 잘 동작함
8. findFirst, findAny
- findFirst 조건에 맞는 첫 번쨰 요소, findAny: 조건에 맞는 아무 요소나 반환
- 병렬 스트림 경우 findAny는 더욱 효율적으로 동작할 수 있다.
9. anyMatch, allMatch, noneMatch
- 하나라도 만족하는지?
- 스트림이 모두 만족하는지
- 아무도 만족하지 않은지


10. max
- 내부적으로 Integer.compare(x,y)를 사용해야 한다.
- 결과값이 음수면 오른쪽 값이 큰 거로 판단한다.

11. min
- Integer.comp*are (x,y) 를 이용한다.
- 결과값이 음수면 왼쪽값이 최소값으로 판단한다.


# 기본형 특화 스트림

숫자 범위 생성
- range(1,5)  : 시작값 이상, 끝값 미만
- IntStream.range(1,5) -> [1, 2, 3, 4]

- rangeClose(1, 5) : 시작값 이상, 끝값 포함
- IntStream.rangeClosed(1, 5) -> [1, 2, 3, 4, 5]


## 주요 기능 및 메서드
합계 , 평균 자주 사용하는 연산을 편리한 메서드로 제공한다.
타입 변환과 박싱/언박싱 메서드도 제공한다.
기본형 특화 스트림은 int, long, double 같은 숫자를 사용한다.

- sum
- average
- summary , statics()
- mapToLong(), mapToDouble
- mapToObject
- boxed
- sum, min, max, count



# 성능
- for문이 스트림보다 1.5~2배 정도 빠르다.
- Intstream 같이 기본형 특화 스트림을 사용하면 박싱/언박싱 비용이 전통적인 for문이 10~30% 정도 더 빠르다.
- 일반적으로 극단적인 성능이 요구되지 않는한  stream 사용하자

